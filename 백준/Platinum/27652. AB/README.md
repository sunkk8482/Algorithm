# [Platinum V] AB - 27652 

[문제 링크](https://www.acmicpc.net/problem/27652) 

### 성능 요약

메모리: 220220 KB, 시간: 292 ms

### 분류

자료 구조, 해싱, 문자열, 트리, 트라이

### 제출 일자

2024년 11월 27일 20:04:29

### 문제 설명

<p>집합 $A, B$와 문자열 $S$에 대하여, 다음 쿼리를 수행하는 프로그램을 작성하시오.</p>

<ul>
	<li><code>add A</code> $S$: $A$에 $S$를 추가한다.</li>
	<li><code>delete A</code> $S$: $A$에서 $S$를 제거한다.</li>
	<li><code>add B</code> $S$: $B$에 $S$를 추가한다.</li>
	<li><code>delete B</code> $S$: $B$에서 $S$를 제거한다.</li>
	<li><code>find</code> $S$: $A$의 원소의 <strong>접두사</strong>와 $B$의 원소의 <strong>접미사</strong>를 이어 붙여 $S$가 되는 경우의 수를 출력한다. 원소가 다르거나 접두사(접미사)가 다르면 다른 경우로 센다. 빈 접두사(접미사)는 고려하지 않는다.</li>
</ul>

<p>초기에 $A, B$는 비어있으며, 이미 존재하는 원소를 추가하거나 존재하지 않는 원소를 제거하는 쿼리는 주어지지 않는다.</p>

### 입력 

 <p>첫째 줄에 쿼리의 개수 $Q$가 주어진다. $\left(1\leq Q\leq 1\,000\right)$</p>

<p>둘째 줄부터 $Q$개의 줄에 걸쳐 쿼리가 한 줄에 하나씩 주어진다. 쿼리에 등장하는 문자열은 영어 소문자로 이루어지며, 길이는 $1$ 이상 $1\,000$ 이하이다.</p>

<p><code>find</code> 쿼리는 적어도 한 번 주어진다.</p>

### 출력 

 <p><code>find</code> 쿼리의 답을 한 줄에 하나씩 출력한다.</p>

